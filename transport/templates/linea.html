{% extends "disposicion.html" %}
{% block content %}
<!--<div class="contenedor-lineas">
    <h1>Línea 5</h1>
    <ul class="lineas">
        <li>
            <div class="linea">5</div>
            <p>Av. do ferrocarril, 81</p>
        </li>
        <li>
            <div class="linea">5</div>
            <p>Av. do ferrocarril, 81</p>
        </li>
        <li>
            <div class="linea">5</div>
            <p>Av. do ferrocarril, 81</p>
        </li>
        <li>
            <div class="linea">5</div>
            <p>Av. do ferrocarril, 81</p>
        </li>
    </ul>
</div>-->
<!-- leafletjs -->
<div class="nombre-linea" >
    <h1><span class="simbolo_linea" style="background-color: #6792BC">5</span> Durmideiras - Espacio Coruña</h1>
    <ol class="paradas-linea" style="--color-linea: #6792BC;">
        <li class="parada"><span class="nombre_parada">238 - Durmideiras, mercado</span><p>Enlaces: <span class="simbolo_linea" style="background-color: #6792BC">5   </span></p></li>
        <li class="parada"><span class="nombre_parada">Av. de Navarra, 57</span></li>
        <li class="parada"><span class="nombre_parada">Av. de Navarra, 27</span></li>
        <li class="parada"><span class="nombre_parada">A Torre, 91</span></li>
        <li class="parada"><span class="nombre_parada">A Torre, 63</span></li>
        <li class="parada"><span class="nombre_parada">Pza. de España, 24</span></li>
        <li class="parada"><span class="nombre_parada">Panadeiras, Museo</span></li>
        <li class="parada"><span class="nombre_parada">San Andrés, Africano</span></li>
        <li class="parada"><span class="nombre_parada">Pza. Pontevedra, IES Eusebio da Guarda</span></li>
        <li class="parada"><span class="nombre_parada">Juan Flórez, 56</span></li>
        <li class="parada"><span class="nombre_parada">Juan Flórez, 82</span></li>
        <li class="parada"><span class="nombre_parada">Juan Flórez, 119</span></li>
        <li class="parada"><span class="nombre_parada">San Pedro de Mezonzo</span></li>
        <li class="parada"><span class="nombre_parada">Marqués de Figueroa</span></li>
        <li class="parada"><span class="nombre_parada">Av. do Ferrocarril, Estación de Trens</span></li>
        <li class="parada"><span class="nombre_parada">Av. do Ferocarril, 14</span></li>
        <li class="parada"><span class="nombre_parada">Av. do Ferrocarril, f/Pza. Ozores Arraiz</span></li>
        <li class="parada"><span class="nombre_parada">Av. do Ferrocarril, 54</span></li>
        <li class="parada"><span class="nombre_parada">Av. do Ferrocarril, Residencial Trébole</span></li>
        <li class="parada"><span class="nombre_parada">San Cristovo, av. da Sardiñeira</span></li>
        <li class="parada"><span class="nombre_parada">Aparcadoiro Lonzas</span></li>
        <li class="parada"><span class="nombre_parada">O Birloque, Bloque 6-8</span></li>
        <li class="parada"><span class="nombre_parada">A Cabana</span></li>
        <li class="parada"><span class="nombre_parada">Espacio Coruña</span><p>Enlaces: <span class="simbolo_linea" style="background-color: #6792BC">5   </span></p></li>
    </ol>
</div>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
<script src="/static/scripts/leaflet-realtime.js"></script>
<!--<div id="map"></div>
<script src="/api/linea/{{ linea }}/buses"></script>
<script>
    var map = L.map('map').setView([43.3445, -8.425], 14);
    /* var map = L.map('map'),
        realtime = L.realtime({
            url: '/api/linea/500/buses',
            crossOrigin: false,
            type: 'json'
        }, {
            interval: 15000
        }).addTo(map);

    realtime.on('update', function() {
        map.fitBounds(realtime.getBounds(), {maxZoom: 13})
    }) */

    var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>',
        minZoom: 13
    }).addTo(map);

     function icono(feature, latlng) {
        let iconoBus = L.icon({
            iconUrl: '/static/icono-bus-32.png',

            iconSize: [32, 32],
            iconAnchor: [16, 16],
            popupAnchor: [16, 28],
        })
        return L.marker(latlng, { icon: iconoBus })
    }

    let opts = {
        pointToLayer: icono
    }

    L.geoJson(buses, opts).addTo(map);
</script>-->
<hr>
<h1>Ida</h1>
{% for parada in buses[0]['paradas'] %}
    <p>Parada {{ parada.parada }}
    {% for bus in parada.buses %}
        <p>Bus nº: {{ bus.bus }}; Estado: {{ bus.estado }}; Distancia: {{ bus.distancia*100 }}%</p>
        <p>0 Significa que el bus está en la parada, 1 significa que el bus está en movimiento, el porcentaje representa el porcentaje del bus en el recorrido total</p>
    {% endfor %}
    <hr>
{% endfor %}
<h1>Vuelta</h1>
{% for parada in buses[1]['paradas'] %}
    <p>Parada {{ parada.parada }}
    {% for bus in parada.buses %}
        <p>Bus nº: {{ bus.bus }}; Estado: {{ bus.estado }}; Distancia: {{ bus.distancia*100 }}%</p>
        <p>0 Significa que el bus está en la parada, 1 significa que el bus está en movimiento, el porcentaje representa el porcentaje del bus en el recorrido total</p>
    {% endfor %}
    <hr>
{% endfor %}
{% endblock content %}